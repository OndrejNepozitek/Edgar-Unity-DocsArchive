<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Edgar-Unity-DocsArchive/blog/rss.xml" title="Edgar - Unity: Alpha docs archive Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Edgar-Unity-DocsArchive/blog/atom.xml" title="Edgar - Unity: Alpha docs archive Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Room template customization | Edgar - Unity: Alpha docs archive</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Room template customization | Edgar - Unity: Alpha docs archive"><meta data-react-helmet="true" name="description" content="In this guide, we will cover:"><meta data-react-helmet="true" property="og:description" content="In this guide, we will cover:"><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity-DocsArchive/docs/next/guides/room-template-customization"><link data-react-helmet="true" rel="shortcut icon" href="/Edgar-Unity-DocsArchive/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity-DocsArchive/docs/next/guides/room-template-customization"><link rel="stylesheet" href="/Edgar-Unity-DocsArchive/styles.59163da7.css">
<link rel="preload" href="/Edgar-Unity-DocsArchive/styles.1de33962.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/runtime~main.ed91e56c.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/main.b98b1f40.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/1.2b6eab23.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/1be78505.36a57963.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/300.10d19e34.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/301.5c69e847.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/f976f453.39a558da.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/299.f7900408.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/6ef6f8c4.a54cfa9f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Edgar-Unity-DocsArchive/"><strong class="navbar__title">Edgar - Unity: Alpha docs archive</strong></a><a href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/introduction/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Link to live docs (this is only archive)</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive: 2.0.0-alpha.9</a></li><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.8/introduction">Archive: 2.0.0-alpha.8</a></li><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.7/introduction">Archive: 2.0.0-alpha.7</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Edgar-Unity-DocsArchive/"><strong class="navbar__title">Edgar - Unity: Alpha docs archive</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/introduction/" target="_blank" rel="noopener noreferrer" class="menu__link">Link to live docs (this is only archive)</a></li><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive: 2.0.0-alpha.9</a></li><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.8/introduction">Archive: 2.0.0-alpha.8</a></li><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.7/introduction">Archive: 2.0.0-alpha.7</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/introduction">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/room-templates">Room templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/level-graphs">Level graphs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/generator-setup">Generator setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/generated-level-info">Level structure and rooms data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/basics/performance-tips">Performance tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Generators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/generators/dungeon-generator">Dungeon generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/generators/post-process">Post-processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/generators/platformer-generator">(PRO) Platformer generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/generators/custom-input">(PRO) Custom input</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/example-1">Example 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/example-2">Example 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/platformer-1">(PRO) Platformer 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/isometric-1">(PRO) Isometric 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/enter-the-gungeon">(PRO) Enter the Gungeon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/examples/dead-cells">(PRO) Dead Cells</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Guides</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/room-template-customization">Room template customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/current-room-detection">Current room detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/fog-of-war">(PRO) Fog of war</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/minimap">(PRO) Minimap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/door-sockets">(PRO) Door sockets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/guides/directed-level-graphs">(PRO) Directed level graphs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/next/other/migration-v1-v2">Migration from v1 to v2</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Edgar - Unity: Alpha docs archive <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/Edgar-Unity-DocsArchive/docs/guides/room-template-customization">latest version</a></strong> (2.0.0-alpha.9).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_Oumm">Room template customization</h1></header><div class="markdown"><p>In this guide, we will cover:</p><ol><li>How to <strong>override the default structure of tilemap layers</strong></li><li>How to <strong>customize room templates</strong> e.g. by automatically adding additional game objects/components</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tilemap-layers-structure"></a>Tilemap layers structure<a class="hash-link" href="#tilemap-layers-structure" title="Direct link to heading">#</a></h2><p>Each room template comes with a set of tilemap layers that are all children of the <em>Tilemaps</em> game object in the room template. For dungeon room templates, we usually want a tilemap layer for wall tiles, floor tiles, etc. We tried to provide a reasonable default setup, but it is expected that users may want to use a different structure.</p><p>There is a <em>Tilemap Layers Structure</em> field in the <em>Post-processing config</em> section of the <em>Dungeon Generator</em> component that controls the structure of tilemaps. This field is backed by an enum which currently has 3 possible values:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="default"></a><code>Default</code><a class="hash-link" href="#default" title="Direct link to heading">#</a></h3><p>The default tilemaps structure is what you get when you create a room template via the <em>Create</em> menu dialogue. This structure of tilemaps is <em>fixed</em>, meaning that if you customize the structure of some of your room templates, the resulting structure will always be the same. <strong>Therefore, it is not recommended to make any changes to the structure of tilemaps when using this mode,</strong> as it can lead to unexpected results.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fromexample"></a><code>FromExample</code><a class="hash-link" href="#fromexample" title="Direct link to heading">#</a></h3><p>This mode makes it possible to infer the desired structure of tilemaps from an example room template given to the generator. When enabled, there is a new field - <em>Tilemaps Layers Example</em>. To configure this mode, you have to take one of your room templates and assign it to that field. After a level is generated, the generator will take the example room template, look for the <code>Tilemaps</code> game object inside the room template and then instantiate this game object. It means that anything that is inside the <code>Tilemaps</code> game object will be included in the generated level, including the structure of tilemaps in the example. The last thing that the generator does is that it removes all the tiles in the example so that you can use a real room template as an example.</p><blockquote><p><strong>Note:</strong> In the past, if you wanted to have a custom structure of tilemaps, you had to write a piece of code to do that. Even if you wanted to change something small, you still had to do that. The <code>FromExample</code> mode is here to change that.</p></blockquote><p>Typical use case:</p><ul><li>Start with a room template with the default structure of tilemaps</li><li>Decide that you want to change something in the tilemaps - modify layers/sorting layers, add/remove colliders, etc.</li><li>Change the room template to reflect these changes</li><li>Use the <code>FromExample</code> mode and assign this room template to the example field</li><li>When creating a new room template, duplicate one of the room templates with the correct structure (instead of using the <em>Create</em> menu dialogue to create the empty default room template)</li></ul><blockquote><p><strong>Note:</strong> It is still very important to have the same structure of tilemaps across all room templates. So make sure that all the room templates have the same structure as the example room template.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="custom"></a><code>Custom</code><a class="hash-link" href="#custom" title="Direct link to heading">#</a></h3><p>The last way of customizing the structure of tilemap layers requires writing a piece of code. You have to create a class that inherits from the <code>TilemapLayersHandlerBase</code> class. Below is a commented example of how to do that:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token comment" style="color:rgb(112, 112, 112)">// TilemapLayersHandlerBase inherit from ScriptableObject so we need to create an asset</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token comment" style="color:rgb(112, 112, 112)">// menu item that we will use to create the scriptable object instance.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token comment" style="color:rgb(112, 112, 112)">// The menu name can be changed to anything you want.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token comment" style="color:rgb(112, 112, 112)">// [CreateAssetMenu(menuName = &quot;Dungeon generator/Custom tilemap layers handler&quot;, fileName = &quot;CustomTilemapLayersHandler&quot;)]</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">CustomTilemapLayersHandlerExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">TilemapLayersHandlerBase</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">InitializeTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// First make sure that you add the grid component</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> grid </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">Grid</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// If we want a different cell size, we can configure that here</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// grid.cellSize = new Vector3(1, 2, 1);</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// And now we create individual tilemap layers</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> floorTilemapObject </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">CreateTilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Floor&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">0</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> wallsTilemapObject </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">CreateTilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Walls&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">1</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">AddCompositeCollider</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">wallsTilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">CreateTilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Additional layer 1&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">2</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token function" style="color:#ffc66d">CreateTilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Additional layer 2&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">3</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// Helper to create a tilemap layer</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">protected</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">CreateTilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">string</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> parentObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">int</span><span class="token plain"> sortingOrder</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Create a new game object that will hold our tilemap layer</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapObject </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Make sure to correctly set the parent</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">SetParent</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">parentObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemap </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">Tilemap</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapRenderer </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">TilemapRenderer</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapRenderer</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">sortingOrder </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> sortingOrder</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// Helper to add a collider to a given tilemap game object.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">AddCompositeCollider</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> tilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">bool</span><span class="token plain"> isTrigger </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">false</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapCollider2D </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">TilemapCollider2D</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapCollider2D</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">usedByComposite </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">true</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> compositeCollider2d </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">CompositeCollider2D</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        compositeCollider2d</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">geometryType </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> CompositeCollider2D</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">GeometryType</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Polygons</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        compositeCollider2d</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">isTrigger </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> isTrigger</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">GetComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">Rigidbody2D</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">bodyType </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> RigidbodyType2D</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Static</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>When we have our custom tilemap layers handler prepared, there are 2 additional steps:</p><ol><li><strong>Register the handler in the generator</strong> so that each generated level has this new structure</li><li>(<em>Optional but highly recommended</em>) <strong>Create a custom room template initializer</strong> that will help you with creating room templates with the new structure</li></ol><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="register-the--handler-in-the-generator"></a>Register the  handler in the generator<a class="hash-link" href="#register-the--handler-in-the-generator" title="Direct link to heading">#</a></h4><p>We have to configure the generator to use our custom tilemap layers handler.</p><p>First, we have to create an instance of a ScriptableObject that will hold our custom handler. This is the reason why we added the <em>CreateAssetMenu</em> attribute to our handler. In the project view, we right-click in a folder and choose <em>Create -&gt; Edgar -&gt; Custom tilemap layers handler</em> (the path may be changed in the <em>CreateAssetMenu</em> attribute). That should create a file in the current folder.</p><p>And second, we have to drag and drop this file to the <em>Tilemap Layers Handler</em> field of our generator component. Make sure to choose the <em>Custom</em> tilemap layers structure mode to see the field. If we want to switch the tilemap layers handler in the future, we can either replace it with a different handler or remove it to use the default handler.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="create-a-custom-room-template-initializer"></a>Create a custom room template initializer<a class="hash-link" href="#create-a-custom-room-template-initializer" title="Direct link to heading">#</a></h4><p>Now we will add a <em>Create menu</em> shortcut to create a room template with a custom tilemap layers handler. This is better explained in the next section, below is the minimal working example. It will add a <em>Create -&gt; Edgar -&gt; Custom room template</em> menu item that will create a room template prefab with our custom tilemap layers.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">using</span><span class="token plain"> UnityEngine</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">if</span><span class="token preprocessor property"> UNITY_EDITOR</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">using</span><span class="token plain"> UnityEditor</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">CustomRoomTemplateInitializerExample</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">RoomTemplateInitializerBase</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">InitializeTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> tilemapsRoot</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Create an instance of our custom tilemap layers handler</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapLayersHandler </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> ScriptableObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">CreateInstance</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">CustomTilemapLayersHandlerExample</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Initialize tilemaps</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapLayersHandler</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">InitializeTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">tilemapsRoot</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">if</span><span class="token preprocessor property"> UNITY_EDITOR</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token class-name" style="color:#dd4a68">MenuItem</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Assets/Create/Edgar/Custom room template&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">CreateRoomTemplatePrefab</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Make sure to use the correct generic parameter - it should be the type of this class</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        RoomTemplateInitializerUtils</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">CreateRoomTemplatePrefab</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">CustomRoomTemplateInitializerExample</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="room-template-initializers"></a>Room template initializers<a class="hash-link" href="#room-template-initializers" title="Direct link to heading">#</a></h2><p>The process of creating room templates would be very time-consuming and error-prone if done manually, i.e. by creating all the tilemap layers by hand. If you use the default tilemaps structure, you can use the <em>Create</em> menu dialogue. But if you somehow customize your room templates, e.g. by adding lights represented by multiple game objects, the default room template initializer is no longer useful. There are basically two ways of making it easier to create room templates:</p><ol><li>Choose one of the already created room templates and create a copy of the prefab</li><li>Write a piece of code that will handle the initialization of new room templates</li></ol><p>The first option is a pretty solid choice most of the time and requires no extra preparation steps. In this guide, we will see how to handle the second option. We will implement a so-called <em>room template initializer</em>. This technique is mostly only useful if you use the <em>Custom</em> tilemaps structure mode, because you will may want to use a custom tilemap layers handler.</p><p>There are two main ways of utilizing custom room template initializers:</p><ol><li>To override the default structure of tilemap layers</li><li>To do some post-processing, e.g. add additional game objects or components to a room template</li></ol><p>The steps to create a custom room template initializer are the following:</p><ol><li>Create a class that inherits from <code>RoomTemplateInitializerBase</code></li><li>(Optional) Override the <code>InitializeTilemaps()</code> method and use a custom tilemap layers handler</li><li>(Optional) Run additional logic after a room template is created</li><li>Add custom menu item so that we can use the initializer via a <em>Create asset menu</em></li></ol><p>An example can be seen below:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">using</span><span class="token plain"> UnityEngine</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">if</span><span class="token preprocessor property"> UNITY_EDITOR</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">using</span><span class="token plain"> UnityEditor</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">CustomRoomTemplateInitializerExample2</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">RoomTemplateInitializerBase</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">Initialize</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Call the default initialization</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">base</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Initialize</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Place your custom logic after initialization here</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// This script is attached to the room template game object that is being created (and this component is later removed)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// So you can access the gameObject field and add e.g. additional game object</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// For example, we can add a game object that will hold lights</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> lightsGameObject </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Lights&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        lightsGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">SetParent</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">gameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">InitializeTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token plain"> tilemapsRoot</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Create an instance of our custom tilemap layers handler</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapLayersHandler </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> ScriptableObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">CreateInstance</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">CustomTilemapLayersHandlerExample</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Initialize tilemaps</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        tilemapLayersHandler</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">InitializeTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">tilemapsRoot</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">if</span><span class="token preprocessor property"> UNITY_EDITOR</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token class-name" style="color:#dd4a68">MenuItem</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Assets/Create/Edgar/Custom room template&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">CreateRoomTemplatePrefab</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Make sure to use the correct generic parameter - it should be the type of this class</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        RoomTemplateInitializerUtils</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">CreateRoomTemplatePrefab</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">CustomRoomTemplateInitializerExample2</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token preprocessor property">#</span><span class="token preprocessor property directive keyword" style="color:rgb(204, 130, 66)">endif</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/docs/guides/room-template-customization.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity-DocsArchive/docs/next/examples/dead-cells"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« (PRO) Dead Cells</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity-DocsArchive/docs/next/guides/current-room-detection"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Current room detection Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tilemap-layers-structure" class="table-of-contents__link">Tilemap layers structure</a><ul><li><a href="#default" class="table-of-contents__link"><code>Default</code></a></li><li><a href="#fromexample" class="table-of-contents__link"><code>FromExample</code></a></li><li><a href="#custom" class="table-of-contents__link"><code>Custom</code></a></li></ul></li><li><a href="#room-template-initializers" class="table-of-contents__link">Room template initializers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity-DocsArchive/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity-DocsArchive/styles.1de33962.js"></script>
<script src="/Edgar-Unity-DocsArchive/runtime~main.ed91e56c.js"></script>
<script src="/Edgar-Unity-DocsArchive/main.b98b1f40.js"></script>
<script src="/Edgar-Unity-DocsArchive/1.2b6eab23.js"></script>
<script src="/Edgar-Unity-DocsArchive/1be78505.36a57963.js"></script>
<script src="/Edgar-Unity-DocsArchive/300.10d19e34.js"></script>
<script src="/Edgar-Unity-DocsArchive/301.5c69e847.js"></script>
<script src="/Edgar-Unity-DocsArchive/f976f453.39a558da.js"></script>
<script src="/Edgar-Unity-DocsArchive/299.f7900408.js"></script>
<script src="/Edgar-Unity-DocsArchive/6ef6f8c4.a54cfa9f.js"></script>
</body>
</html>
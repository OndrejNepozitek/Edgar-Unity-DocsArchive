<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/Edgar-Unity-DocsArchive/blog/rss.xml" title="Edgar - Unity: Alpha docs archive Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Edgar-Unity-DocsArchive/blog/atom.xml" title="Edgar - Unity: Alpha docs archive Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-31904365-17","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">(PRO) Dead Cells case study | Edgar - Unity: Alpha docs archive</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="2.0.0-alpha.4"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-2.0.0-alpha.4"><meta data-react-helmet="true" property="og:title" content="(PRO) Dead Cells case study | Edgar - Unity: Alpha docs archive"><meta data-react-helmet="true" name="description" content="In this tutorial, we will look into how to generate levels similar to what we can see in Dead Cells."><meta data-react-helmet="true" property="og:description" content="In this tutorial, we will look into how to generate levels similar to what we can see in Dead Cells."><meta data-react-helmet="true" property="og:url" content="https://ondrejnepozitek.github.io/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/dead-cells"><link data-react-helmet="true" rel="shortcut icon" href="/Edgar-Unity-DocsArchive/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ondrejnepozitek.github.io/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/dead-cells"><link rel="stylesheet" href="/Edgar-Unity-DocsArchive/styles.59163da7.css">
<link rel="preload" href="/Edgar-Unity-DocsArchive/styles.1de33962.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/runtime~main.ed91e56c.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/main.b98b1f40.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/1.2b6eab23.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/1be78505.36a57963.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/300.10d19e34.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/301.5c69e847.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/62475281.47632bd6.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/299.f7900408.js" as="script">
<link rel="preload" href="/Edgar-Unity-DocsArchive/ae68bcbb.25689d70.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/Edgar-Unity-DocsArchive/"><strong class="navbar__title">Edgar - Unity: Alpha docs archive</strong></a><a href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/introduction/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Link to live docs (this is only archive)</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive: 2.0.0-alpha.9</a></li><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.8/introduction">Archive: 2.0.0-alpha.8</a></li><li><a class="dropdown__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.7/introduction">Archive: 2.0.0-alpha.7</a></li></ul></div><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/Edgar-Unity-DocsArchive/"><strong class="navbar__title">Edgar - Unity: Alpha docs archive</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://ondrejnepozitek.github.io/Edgar-Unity/docs/introduction/" target="_blank" rel="noopener noreferrer" class="menu__link">Link to live docs (this is only archive)</a></li><li class="menu__list-item menu__list-item--collapsed"><a aria-current="page" class="menu__link menu__link--sublist navbar__link--active" role="button" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/introduction">Archive: 2.0.0-alpha.9</a></li><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.8/introduction">Archive: 2.0.0-alpha.8</a></li><li class="menu__list-item"><a class="menu__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.7/introduction">Archive: 2.0.0-alpha.7</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/installation">Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/introduction">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/room-templates">Room templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/level-graphs">Level graphs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/generator-setup">Generator setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/generated-level-info">Level structure and rooms data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/performance-tips">Performance tips</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Generators</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/dungeon-generator">Dungeon generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/platformer-generator">(PRO) Platformer generator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/custom-input">(PRO) Custom input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/post-process">Post-processing</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/example-1">Example 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/example-2">Example 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/platformer-1">(PRO) Platformer 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/isometric-1">(PRO) Isometric 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/enter-the-gungeon">(PRO) Enter the Gungeon case study</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/dead-cells">(PRO) Dead Cells case study</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/room-template-customization">Room template customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/current-room-detection">Current room detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/procedural-level-graphs">(PRO) Procedural level graphs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/fog-of-war">(PRO) Fog of war</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/benchmarks">(PRO) Performance benchmarks</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_yu3-">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/other/migration-v1-v2">Migration from v1 to v2</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for Edgar - Unity: Alpha docs archive <strong>2.0.0-alpha.4</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/Edgar-Unity-DocsArchive/docs/examples/dead-cells">latest version</a></strong> (2.0.0-alpha.9).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: 2.0.0-alpha.4</span></div><header><h1 class="docTitle_Oumm">(PRO) Dead Cells case study</h1></header><div class="markdown"><p>In this tutorial, we will look into how to generate levels similar to what we can see in <a href="https://store.steampowered.com/app/588650/Dead_Cells/" target="_blank" rel="noopener noreferrer">Dead Cells</a>.</p><blockquote><p><strong>Disclaimer:</strong> We are in no way affiliated with the authors of the Dead Cells game and this plugin is not used in the game. This is only a case study about how to use this plugin to create something similar to what is done in that game.</p></blockquote><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground_result1.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Underground level generated by our algorithm, inspired by the Prisoners Quarters level from Dead Cells</div></div><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/ramparts_result1.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Rooftop level generated by our algorithm, inspired by the Ramparts level from Dead Cells</div></div><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/ramparts_ingame.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Rooftop level generated by our algorithm, ingame view</div></div><blockquote><p><strong>Note:</strong> All files from this example can be found at <em>ProceduralLevelGenerator/Examples/DeadCells</em>.</p></blockquote><div class="featureUsage"><div class="featureUsage__title">List of used features</div><div class="featureUsage__description">Below is a list of features that are used in this example.</div><table><tbody><tr><td><a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/post-process#custom-post-processing">Custom post-processing</a></td><td>A custom post-processing task is used to spawn enemies after a level is generated</td></tr><tr><td><a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/post-process#custom-post-processing">Custom post-processing</a></td><td>Move the player to the spawn position of the level</td></tr><tr><td><a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/basics/level-graphs#pro-custom-rooms-and-connections">Custom rooms</a></td><td>The definition of rooms is enhanced with a custom type</td></tr></tbody></table></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Dead Cells is a rogue-lite, metroidvania inspired, action-platformer. They use procedural generation techniques to generate levels of the game. An article about their approach can be found <a href="https://www.indiedb.com/games/dead-cells/news/the-level-design-of-a-procedurally-generated-metroidvania" target="_blank" rel="noopener noreferrer">here</a> and a video <a href="https://www.youtube.com/watch?v=tyMrRW-Li_I" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The main idea is that they have hand-made room templates and a graph that describes the structure of the level. Both the room templates and the graph are usually different for each stage of the game. Their procedural generator is then guided by the graph of rooms and picks a random room template for each room. This approach is very similar to what we do in our algorithm.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/original_sewers_graph.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Graph that describes the structure of the Sewers level in Dead Cells</div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="underground-level"></a>Underground level<a class="hash-link" href="#underground-level" title="Direct link to heading">#</a></h2><p>The first level that we will try to implement with our plugin is an underground level inspired by the Prisoners Quarters level from Dead Cells.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/original_prisoners_quarters.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Prisoners Quarters level map from Dead Cells</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="room-templates"></a>Room templates<a class="hash-link" href="#room-templates" title="Direct link to heading">#</a></h3><p>We use the default platformer tilemap layers handler to create the room templates.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/entrance.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/entrance.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Entrance</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/exit.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/exit.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Exit</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/room4.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/room4.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Normal room</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/shop1.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/shop1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Shop</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/teleport2.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/teleport2.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Teleport</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/treasure1.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/treasure1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Treasure</div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="corridors"></a>Corridors<a class="hash-link" href="#corridors" title="Direct link to heading">#</a></h4><p>We use simple corridors to connect individual rooms.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/hor.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/hor.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Horizontal corridor</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/ver.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/ver.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Vertical corridor</div></div></div><p>There is a slight problem with the corners of the corridor and the tileset that we use. In the image below, you can see that if the room that is connected with the corridor has a different height than the corridor, we should use a proper corner tile. We currently do not handle this situation but it could be solved by using rule tiles or by writing a post-processing logic that would find these problems and fix them.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/corridor_problem.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Problem with corridor corners</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="level-graph"></a>Level graph<a class="hash-link" href="#level-graph" title="Direct link to heading">#</a></h3><p>Our underground level is inspired by the Prisoners Quarters level in Dead Cells. The level graph below was created by analyzing the structure of several generated levels and then trying to replicate the main features. </p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground_level_graph.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Level graph for the underground level</div></div><blockquote><p><strong>Note:</strong> It seems like the structure of the level may sligthly differ between individual runs of the game. For example, the positions of the shop room and the treasure room may be swapped. However, to keep it simple, we will use a fixed level graph. You can see the <a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/enter-the-gungeon">Enter the Gungeon</a> for an example of procedurally generated levels.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="custom-room-and-connection-types"></a>Custom room and connection types<a class="hash-link" href="#custom-room-and-connection-types" title="Direct link to heading">#</a></h3><p>In the level graph above, we used custom room and conenction types. The implementation of the custom room type can be seen below. Each room has its type (entrance, treasure, etc) and also a flag that indicates where it is outside (which is used for rooftop levels). Additionaly, we override the <code>ToString()</code> implementation so that the type of the room is displayed in the level graph.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DeadCellsRoom</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">RoomBase</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DeadCellsRoomType</span><span class="token plain"> Type</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">bool</span><span class="token plain"> Outside</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> List</span><span class="token operator" style="color:rgb(204, 130, 66)">&lt;</span><span class="token plain">GameObject</span><span class="token operator" style="color:rgb(204, 130, 66)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">GetRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// We do not need any room templates here because they are resolved based on the type of the room.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">null</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">string</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">GetDisplayName</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Use the type of the room as its display name.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> Type</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">ToString</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>We also have a custom connection type. It currently looks exactly like the default implementation but we use it just in case we need some additional functionality later.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="input-setup"></a>Input setup<a class="hash-link" href="#input-setup" title="Direct link to heading">#</a></h3><p>We decided to use a custom input setup to prepare our inputs. The main idea is the following. We create a level graph as we would normally do but we do not assign any room templates to it. Instead, we create a custom input task that takes a level graph as an input, together with the mapping between the type of room and the available room templates. The implementation will go through individual rooms in the level graph and based on their type it will assign corresponding room templates.</p><p>First, we create the mapping between the type of the room and the available room templates:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token class-name" style="color:#dd4a68">Serializable</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DeadCellsRoomTemplatesConfig</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> DefaultRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> ShopRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Additional room templates would be here</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">GetRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">DeadCellsRoom</span><span class="token plain"> room</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">room</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Type</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token keyword" style="color:rgb(204, 130, 66)">case</span><span class="token plain"> DeadCellsRoomType</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Shop</span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> ShopRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token keyword" style="color:rgb(204, 130, 66)">default</span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> DefaultRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>And then we create a simple input setup task that prepares the level description:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">class</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DeadCellsInputSetupTask</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">:</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DungeonGeneratorInputBase</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">LevelGraph</span><span class="token plain"> LevelGraph</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">DeadCellsRoomTemplatesConfig</span><span class="token plain"> RoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// This is the main method of the input setup.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// It prepares the description of the level for the procedural generator.</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;/summary&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">/// &lt;returns&gt;&lt;/returns&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">protected</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">LevelDescription</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">GetLevelDescription</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> levelDescription </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">LevelDescription</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Go through individual rooms and add each room to the level description</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Room templates are resolved based on their type</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> room </span><span class="token keyword" style="color:rgb(204, 130, 66)">in</span><span class="token plain"> LevelGraph</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Rooms</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">Cast</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">DeadCellsRoom</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            levelDescription</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">AddRoom</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">room</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> RoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">room</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">ToList</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Go through individual connections and for each connection create a corridor room</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> connection </span><span class="token keyword" style="color:rgb(204, 130, 66)">in</span><span class="token plain"> LevelGraph</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Connections</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">Cast</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">DeadCellsConnection</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> corridorRoom </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> ScriptableObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">CreateInstance</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">DeadCellsRoom</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            corridorRoom</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Type </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> DeadCellsRoomType</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Corridor</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            levelDescription</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">AddCorridorConnection</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">connection</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> RoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">CorridorRoomTemplates</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">ToList</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> corridorRoom</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token plain"> levelDescription</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="spawn-position"></a>Spawn position<a class="hash-link" href="#spawn-position" title="Direct link to heading">#</a></h3><p>In <a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/example-1">Example 1</a>, we placed the player prefab directly in the Spawn room template to make sure that the player always starts in the correct room. However, there is also a different approach to achieve the same result. Instead of placing the player prefab inside the room template, we simply create an empty GameObject that will act as a marker of the spawn position. We place the player prefab directly into the scene and implement a simple post-processing logic that finds the spawn position marker and moves the player there after the level is generated.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">SetSpawnPosition</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GeneratedLevel</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Find the room with the Entrance type</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> entranceRoomInstance </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> level</span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetRoomInstances</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">FirstOrDefault</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(204, 130, 66)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">DeadCellsRoom</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Room</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Type </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> DeadCellsRoomType</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Entrance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">entranceRoomInstance </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">null</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">InvalidOperationException</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Could not find Entrance room&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> roomTemplateInstance </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> entranceRoomInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">RoomTemplateInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Find the spawn position marker</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> spawnPosition </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomTemplateInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Find</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;SpawnPosition&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Move the player to the spawn position</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> player </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">FindWithTag</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;Player&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    player</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">position </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> spawnPosition</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">position</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="enemies"></a>Enemies<a class="hash-link" href="#enemies" title="Direct link to heading">#</a></h3><p>In order to spawn enemies in generated levels, we added an empty GameObject called <em>EnemySpawnPositions</em> to each room template where we want to spawn enemies. Each empty GameObject that we attach as a child will mark a single position where an enemy can spawn. An advantage of this approach is that we can randomize the process of choosing an enemy for each spawn point.</p><p>We did not implement any combat, just a simple patrol AI that makes the enemy change its direction if there is a hole or an obstacle ahead.</p><p>Below you can see a method that we can put inside a post-processing task to handle the spawn of enemies.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">bool</span><span class="token plain"> SpawnEnemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> Enemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">DoSpawnEnemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GeneratedLevel</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Check that we have at least one enemy to choose from</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">Enemies </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(204, 130, 66)">||</span><span class="token plain"> Enemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Length </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">0</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">InvalidOperationException</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;There must be at least one enemy prefab to spawn enemies&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Go through individual rooms</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> roomInstance </span><span class="token keyword" style="color:rgb(204, 130, 66)">in</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetRoomInstances</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> roomTemplate </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">RoomTemplateInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Find the game object that holds all the spawn points</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> enemySpawnPoints </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomTemplate</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Find</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;EnemySpawnPoints&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">enemySpawnPoints </span><span class="token operator" style="color:rgb(204, 130, 66)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">null</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token comment" style="color:rgb(112, 112, 112)">// Go through individual spawn points and choose a random enemy to spawn</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token keyword" style="color:rgb(204, 130, 66)">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">Transform</span><span class="token plain"> enemySpawnPoint </span><span class="token keyword" style="color:rgb(204, 130, 66)">in</span><span class="token plain"> enemySpawnPoints</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> enemyPrefab </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> Enemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token class-name" style="color:#dd4a68">Random</span><span class="token class-name punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token class-name" style="color:#dd4a68">Next</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">Enemies</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Length</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> enemy </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">Instantiate</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">enemyPrefab</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                enemy</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">parent </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomTemplate</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">                enemy</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">position </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> enemySpawnPoint</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">position</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="level-map"></a>Level map<a class="hash-link" href="#level-map" title="Direct link to heading">#</a></h3><p>Dead Cells comes with a schematic level map that shows the overview of the whole level with a very simple graphics. This level map also contains positions of all the teleport, treasures, etc. We decided to create something similar (although much simpler) for this tutorial. The result can be seen below:</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground_result1.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Simple level map</div></div><p>After a level is generated, we create an additional tilemap which will contain all the information about the level map. We go through individual tilemap layers of the level and copy them to the level map tilemap. First, we find all the tiles from the <em>Background</em> tilemap layer and copy them to the level map. But instead of using the normal graphics of individual tiles, we use a tile that is completely blue. Then we repeat this process with other layers and different colors of tiles.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">TileBase</span><span class="token plain"> LevelMapWallTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">TileBase</span><span class="token plain"> LevelMapWallBackgroundTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">TileBase</span><span class="token plain"> LevelMapBackgroundTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">TileBase</span><span class="token plain"> LevelMapPlatformTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token keyword" style="color:rgb(204, 130, 66)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">SetupLevelMap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">GeneratedLevel</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Return if level map not supported</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token operator" style="color:rgb(204, 130, 66)">!</span><span class="token plain">DeadCellsGameManager</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Instance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">LevelMapSupported</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">return</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Create new tilemap layer for the level map</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemaps </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetSharedTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapsRoot </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">RootGameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Find</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">GeneratorConstants</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">TilemapsRootName</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapObject </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token class-name" style="color:#dd4a68">GameObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token string" style="color:#6a8759">&quot;LevelMap&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">SetParent</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">tilemapsRoot</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">transform</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">localPosition </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> Vector3</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">zero</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemap </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">Tilemap</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemapRenderer </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token generic-method function" style="color:#ffc66d">AddComponent</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&lt;</span><span class="token generic-method class-name" style="color:#dd4a68">TilemapRenderer</span><span class="token generic-method punctuation" style="color:rgb(204, 130, 66)">&gt;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    tilemapRenderer</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">sortingOrder </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">20</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Assign special layer</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> mapLayer </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> LayerMask</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">NameToLayer</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">DeadCellsGameManager</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">LevelMapLayer</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    tilemapObject</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">layer </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> mapLayer</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Copy background tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">CopyTilesToLevelMap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token string" style="color:#6a8759">&quot;Background&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Other 1&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> tilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> LevelMapBackgroundTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Copy wall background tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">CopyTilesToLevelMap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token string" style="color:#6a8759">&quot;Background&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> tilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> LevelMapWallBackgroundTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(204, 130, 66)">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> WallTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Copy platforms tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">CopyTilesToLevelMap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token string" style="color:#6a8759">&quot;Platforms&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> tilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> LevelMapPlatformTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Copy wall tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token function" style="color:#ffc66d">CopyTilesToLevelMap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">new</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">[</span><span class="token punctuation" style="color:rgb(204, 130, 66)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token string" style="color:#6a8759">&quot;Walls&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> tilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> LevelMapWallTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>The last part of the setup is to create a camera the displays only the level map tilemap layer. To achieve that, we assign a special layer to the tilemap and then set the culling mask. We also added a simple camera control that reacts to players pressing a button and toggles between the default view and the level map view.</p><blockquote><p><strong>Note:</strong> For the level map to work, you need to add a layer called <strong>LevelMap</strong>. Unfortunately, it is impossible to do that from a script.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="results"></a>Results<a class="hash-link" href="#results" title="Direct link to heading">#</a></h3><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result1_ingame.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result - ingame view</div></div><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result1.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result - level map view</div></div><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result2.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result2.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result3.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/underground/result3.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result</div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rooftop-level"></a>Rooftop level<a class="hash-link" href="#rooftop-level" title="Direct link to heading">#</a></h2><p>The second level that we try to implement is a little bit different. It is inspired by the Ramparts level from Dead Cells. Instead of being underground, it takes places on the ramparts of the prison. We will have to combine two types of rooms - rooms that are on the roofs of towers and rooms that are inside towers.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/original_ramparts.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Ramparts level map from Dead Cells</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="towers"></a>Towers<a class="hash-link" href="#towers" title="Direct link to heading">#</a></h3><p>The first challenge of this level is how to generate the top layer of rooms in a way that it looks like there are towers that are divided by gaps. Our goal si to create a set of room templates that can be connected only horizontally and then implement a post-processing logic that will create the illusion of towers.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="room-templates-1"></a>Room templates<a class="hash-link" href="#room-templates-1" title="Direct link to heading">#</a></h4><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/entrance.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/entrance.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Entrance</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/exit.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/exit.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Exit</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outside1.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outside1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Normal</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outside3.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outside3.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Normal</div></div></div><blockquote><p><strong>Note:</strong> It is <strong>very important</strong> that we do not use layers with colliders if it is not neccessary. For example, you can see that only the outline tiles of walls have a collider and other walls are in the background layer without a collider. The reason for that is that when the generator assembles the level and copies tiles to shared tilemaps, Unity has to recompute collider shapes which can significantly decrease the performance if there are too tiles with colliders.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="level-graph-1"></a>Level graph<a class="hash-link" href="#level-graph-1" title="Direct link to heading">#</a></h4><p>The first version of the level graph contains the top layer of rooms, i.e. only the rooms that are on top of the towers.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_level_graph_simple.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Level graph with only the top layer of rooms</div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="intermediate-results"></a>Intermediate results<a class="hash-link" href="#intermediate-results" title="Direct link to heading">#</a></h4><p>Below we can see how the level looks now. All the rooms are connected only horizontally because there are no vertical door positions.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_result_towers_intermediate.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Intermediate result</div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="walls"></a>Walls<a class="hash-link" href="#walls" title="Direct link to heading">#</a></h4><p>The last step is to add wall tiles under individual rooms so that the level looks like there are towers. This can be done with a custom post-processing logic that goes through all the rooms and for each used room template it finds the bottom-most layer of tiles. For each tile position in this layer, if it contains a non-null tile, we add a column of wall tiles under it.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">private</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">AddWallsUnderRoom</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token class-name" style="color:#dd4a68">RoomInstance</span><span class="token plain"> roomInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Get the room template and all the used tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> roomTemplate </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">RoomTemplateInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemaps </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> RoomTemplateUtils</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">roomTemplate</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> usedTiles </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> RoomTemplatesLoader</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetUsedTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">tilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">ToList</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> roomTemplateWalls </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> tilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Single</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(204, 130, 66)">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">name </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> </span><span class="token string" style="color:#6a8759">&quot;Walls&quot;</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token comment" style="color:rgb(112, 112, 112)">// Find the minimum y coordinate of all the tiles and use it to find the bottom layer of tiles</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> minY </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> usedTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Min</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(204, 130, 66)">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">y</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> bottomLayerTiles </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> usedTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Where</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(204, 130, 66)">=&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">y </span><span class="token operator" style="color:rgb(204, 130, 66)">==</span><span class="token plain"> minY</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">ToList</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">foreach</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> pos </span><span class="token keyword" style="color:rgb(204, 130, 66)">in</span><span class="token plain"> bottomLayerTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> tilemap </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> backgroundTilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Use the walls tilemap only if the collider is really needed</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// That means we only use it if the tile is the border tile of a tower</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> leftTilePos </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> pos </span><span class="token operator" style="color:rgb(204, 130, 66)">+</span><span class="token plain"> Vector3Int</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">left</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> rightTilePos </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> pos </span><span class="token operator" style="color:rgb(204, 130, 66)">+</span><span class="token plain"> Vector3Int</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">right</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">roomTemplateWalls</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">GetTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">pos</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(204, 130, 66)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(204, 130, 66)">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(204, 130, 66)">!</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">bottomLayerTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Contains</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">leftTilePos</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(204, 130, 66)">&amp;&amp;</span><span class="token plain"> bottomLayerTiles</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">Contains</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">rightTilePos</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            tilemap </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> wallsTilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token comment" style="color:rgb(112, 112, 112)">// Add tiles under this position</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token keyword" style="color:rgb(204, 130, 66)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token keyword" style="color:rgb(204, 130, 66)">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(122, 158, 194)">1</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(204, 130, 66)">&lt;=</span><span class="token plain"> WallDepth</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(204, 130, 66)">++</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            </span><span class="token keyword" style="color:rgb(204, 130, 66)">var</span><span class="token plain"> wallPosition </span><span class="token operator" style="color:rgb(204, 130, 66)">=</span><span class="token plain"> roomInstance</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">Position </span><span class="token operator" style="color:rgb(204, 130, 66)">+</span><span class="token plain"> pos </span><span class="token operator" style="color:rgb(204, 130, 66)">+</span><span class="token plain"> Vector3Int</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">down </span><span class="token operator" style="color:rgb(204, 130, 66)">*</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">            tilemap</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">SetTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">wallPosition</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> WallTile</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><blockquote><p><strong>Note:</strong> Once again, it is <strong>very important</strong> that we use collider for as few tiles as possible. We are adding many tiles and do not want to spend too much time recomputing colliders.</p></blockquote><p>One problem that we have to solve is when we should call this post-processing logic. In the next section, we will add rooms inside the towers. But if we draw walls after all the rooms are drawn, we will overwrite all the rooms that are inside the tower. We would have to do some checks to avoid that. An easier solution is to call our logic after shared tilemaps are initialized but before any rooms are drawn. That means that we first draw the walls and if there is a room occupying the same tiles, the room overwrites the walls, which is what we want. To achieve that, we use <a href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/generators/post-process#pro-priority-callbacks">Priority callbacks</a> and register our logic right after shared tilemaps are initialized.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-csharp codeBlock_1wn8" style="color:#cccccc;background-color:#242424"><div class="token-line" style="color:#cccccc"><span class="token keyword" style="color:rgb(204, 130, 66)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">override</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(204, 130, 66)">void</span><span class="token plain"> </span><span class="token function" style="color:#ffc66d">RegisterCallbacks</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">PriorityCallbacks</span><span class="token operator" style="color:rgb(204, 130, 66)">&lt;</span><span class="token plain">DungeonGeneratorPostProcessCallback</span><span class="token operator" style="color:rgb(204, 130, 66)">&gt;</span><span class="token plain"> callbacks</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token keyword" style="color:rgb(204, 130, 66)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">AddWalls</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">        callbacks</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token function" style="color:#ffc66d">RegisterCallbackAfter</span><span class="token punctuation" style="color:rgb(204, 130, 66)">(</span><span class="token plain">PostProcessPriorities</span><span class="token punctuation" style="color:rgb(204, 130, 66)">.</span><span class="token plain">InitializeSharedTilemaps</span><span class="token punctuation" style="color:rgb(204, 130, 66)">,</span><span class="token plain"> AddWallsUnderRooms</span><span class="token punctuation" style="color:rgb(204, 130, 66)">)</span><span class="token punctuation" style="color:rgb(204, 130, 66)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#cccccc"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 130, 66)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></div><p>The resulting level can be seen below:</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_result_towers.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Towers</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rooms-inside-towers"></a>Rooms inside towers<a class="hash-link" href="#rooms-inside-towers" title="Direct link to heading">#</a></h3><p>The second challenge is how to make sure that if we add rooms inside the towers, they will not cross the boundary of the tower. Unfortunately, it is currently not possible to add such constraints to the generator, so we have to be creative with how we design our room templates.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="room-templates-2"></a>Room templates<a class="hash-link" href="#room-templates-2" title="Direct link to heading">#</a></h4><p>We will design our room templates in a way that it is not possible for them to cross the borders of towers. To do so, we will place all the doors near to the center of the room.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/inside1.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/inside1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Inside room</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/inside2.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/inside2.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Inside room</div></div></div><p>And we also have to create rooms templates that have some vertical door positions so that we can connect the inside rooms to them.</p><div style="font-size:0px;margin:20px 0"><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outteleport1.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outteleport1.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Outside room</div></div><div style="display:inline-block;margin:2px;overflow:hidden;position:relative;width:calc(50% - 4px);vertical-align:top"><a href="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outteleport2.png" target="_blank"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop/outteleport2.png" alt="result" style="height:400px;object-fit:cover"></a><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Outside room</div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="level-graph-2"></a>Level graph<a class="hash-link" href="#level-graph-2" title="Direct link to heading">#</a></h4><p>Now we can add these inside rooms to the level graph.</p><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_level_graph.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Level graph with all the rooms</div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="results-1"></a>Results<a class="hash-link" href="#results-1" title="Direct link to heading">#</a></h3><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_result1.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result - level map view</div></div><div style="text-align:center"><img src="/Edgar-Unity-DocsArchive/img/v2/examples/dead_cells/rooftop_result1_ingame.png"><div style="font-size:16px;font-style:italic;text-align:center;margin:10px 0px 15px">Example result - ingame view</div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/versioned_docs/version-2.0.0-alpha.4/examples/dead-cells.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/examples/enter-the-gungeon"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« (PRO) Enter the Gungeon case study</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Edgar-Unity-DocsArchive/docs/2.0.0-alpha.4/guides/room-template-customization"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Room template customization Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#underground-level" class="table-of-contents__link">Underground level</a><ul><li><a href="#room-templates" class="table-of-contents__link">Room templates</a></li><li><a href="#level-graph" class="table-of-contents__link">Level graph</a></li><li><a href="#custom-room-and-connection-types" class="table-of-contents__link">Custom room and connection types</a></li><li><a href="#input-setup" class="table-of-contents__link">Input setup</a></li><li><a href="#spawn-position" class="table-of-contents__link">Spawn position</a></li><li><a href="#enemies" class="table-of-contents__link">Enemies</a></li><li><a href="#level-map" class="table-of-contents__link">Level map</a></li><li><a href="#results" class="table-of-contents__link">Results</a></li></ul></li><li><a href="#rooftop-level" class="table-of-contents__link">Rooftop level</a><ul><li><a href="#towers" class="table-of-contents__link">Towers</a></li><li><a href="#rooms-inside-towers" class="table-of-contents__link">Rooms inside towers</a></li><li><a href="#results-1" class="table-of-contents__link">Results</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Edgar-Unity-DocsArchive/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/OndrejNepozitek" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://ondra.nepozitek.cz/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/OndrejNepozitek/Edgar-Unity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 OndÅ™ej NepoÅ¾itek</div></div></div></footer></div>
<script src="/Edgar-Unity-DocsArchive/styles.1de33962.js"></script>
<script src="/Edgar-Unity-DocsArchive/runtime~main.ed91e56c.js"></script>
<script src="/Edgar-Unity-DocsArchive/main.b98b1f40.js"></script>
<script src="/Edgar-Unity-DocsArchive/1.2b6eab23.js"></script>
<script src="/Edgar-Unity-DocsArchive/1be78505.36a57963.js"></script>
<script src="/Edgar-Unity-DocsArchive/300.10d19e34.js"></script>
<script src="/Edgar-Unity-DocsArchive/301.5c69e847.js"></script>
<script src="/Edgar-Unity-DocsArchive/62475281.47632bd6.js"></script>
<script src="/Edgar-Unity-DocsArchive/299.f7900408.js"></script>
<script src="/Edgar-Unity-DocsArchive/ae68bcbb.25689d70.js"></script>
</body>
</html>
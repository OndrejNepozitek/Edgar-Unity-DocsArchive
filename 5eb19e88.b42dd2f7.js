(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{169:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return a})),r.d(t,"metadata",(function(){return l})),r.d(t,"toc",(function(){return s})),r.d(t,"default",(function(){return u}));var o=r(3),n=r(7),i=(r(0),r(375)),c=r(378),a={title:"Corridors correction"},l={unversionedId:"guides/corridors-correction",id:"version-1.0.3/guides/corridors-correction",isDocsHomePage:!1,title:"Corridors correction",description:"With some tilesets, it is not possible to correctly connect corridors to rooms without the need of some postprocess. The goal of this tutorial is to demonstrate how to use pipeline tasks to correct such problems. I will use the tileset from Example 2 to describe the problem and show how to fix it.",source:"@site/versioned_docs\\version-1.0.3\\guides\\corridors-correction.md",slug:"/guides/corridors-correction",permalink:"/Edgar-Unity-DocsArchive/docs/1.0.3/guides/corridors-correction",editUrl:"https://github.com/OndrejNepozitek/Edgar-Unity/tree/docusaurus/versioned_docs/version-1.0.3/guides/corridors-correction.md",version:"1.0.3",sidebar:"version-1.0.3/docs",previous:{title:"Procedural level graphs",permalink:"/Edgar-Unity-DocsArchive/docs/1.0.3/guides/procedural-level-graphs"},next:{title:"Tilemap layers",permalink:"/Edgar-Unity-DocsArchive/docs/1.0.3/other/tilemap-layers"}},s=[{value:"Problem",id:"problem",children:[]},{value:"Solution",id:"solution",children:[]}],p={toc:s};function u(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},p,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"With some tilesets, it is not possible to correctly connect corridors to rooms without the need of some postprocess. The goal of this tutorial is to demonstrate how to use pipeline tasks to correct such problems. I will use the tileset from ",Object(i.b)("a",Object(o.a)({parentName:"p"},{href:"example2.md"}),"Example 2")," to describe the problem and show how to fix it."),Object(i.b)("h2",{id:"problem"},"Problem"),Object(i.b)("p",null,"The problem with this tileset is that there is an additonal row of lighter tiles above all wall tiles. This is problematic because we must put all door positions on the outline of a room layout and that means that we cannot correctly connect corridor rooms. This can be seen in the images below."),Object(i.b)(c.a,{cols:2,fixedHeight:!0,mdxType:"Gallery"},Object(i.b)(c.b,{src:"img/original/example2_room1.png",caption:"Basic room template",mdxType:"GalleryImage"}),Object(i.b)(c.b,{src:"img/original/example2_wrong_corridor.png",caption:"Incorrent vertical corridor",mdxType:"GalleryImage"}),Object(i.b)(c.b,{src:"img/original/example2_wrong_corridor2.png",caption:"Incorrect connection",mdxType:"GalleryImage"}),Object(i.b)(c.b,{src:"img/original/example2_wrong_corridor3.png",caption:"Incorrect connection",mdxType:"GalleryImage"})),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note:")," This problem could be also fixed by making it possible to have door position outside the outline, but that is currently not supported by the dungeon generator library. ")),Object(i.b)("h2",{id:"solution"},"Solution"),Object(i.b)("p",null,"The solution is remove the top and bottom rows from the vertical corridor room template (see below) and then write a script that fixes the connection."),Object(i.b)(c.a,{cols:2,fixedHeight:!0,mdxType:"Gallery"},Object(i.b)(c.b,{src:"img/original/example2_corridor_vertical.png",caption:"Correct vertical corridor",mdxType:"GalleryImage"}),Object(i.b)(c.b,{src:"img/original/corridors_correction_before_fix.png",caption:"Before correction",mdxType:"GalleryImage"}),Object(i.b)(c.b,{src:"img/original/corridors_correction_layout.png",caption:"Correction layout",mdxType:"GalleryImage"})),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note:")," Only the topmost and bottommost rows of tiles are used from the correction layout. The middle rows are present only to make it easier to draw the correction layout.")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"Note:")," We can use the correction layout to correct corridors with different widths by simply repeating the middle tile.")),Object(i.b)("p",null,"The implementation itself is not very interesting but you can find it ",Object(i.b)("a",Object(o.a)({parentName:"p"},{href:"https://github.com/OndrejNepozitek/ProceduralLevelGenerator-Unity/blob/master/Assets/ProceduralLevelGenerator/Examples/Example2/Pipeline%20tasks/CorridorsCorrectionConfig.cs"}),"here"),". It is mostly just playing with indices and copying tiles from the correction layout to the dungeon."))}u.isMDXComponent=!0},375:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return m}));var o=r(0),n=r.n(o);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=n.a.createContext({}),p=function(e){var t=n.a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=p(e.components);return n.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},b=n.a.forwardRef((function(e,t){var r=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=p(r),b=o,m=u["".concat(c,".").concat(b)]||u[b]||d[b]||i;return r?n.a.createElement(m,a(a({ref:t},s),{},{components:r})):n.a.createElement(m,a({ref:t},s))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=r.length,c=new Array(i);c[0]=b;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:o,c[1]=a;for(var s=2;s<i;s++)c[s]=r[s];return n.a.createElement.apply(null,c)}return n.a.createElement.apply(null,r)}b.displayName="MDXCreateElement"},376:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return c}));var o=r(22),n=r(377);function i(){const{siteConfig:{baseUrl:e="/",url:t}={}}=Object(o.default)();return{withBaseUrl:(r,o)=>function(e,t,r,{forcePrependBaseUrl:o=!1,absolute:i=!1}={}){if(!r)return r;if(r.startsWith("#"))return r;if(Object(n.b)(r))return r;if(o)return t+r;const c=r.startsWith(t)?r:t+r.replace(/^\//,"");return i?e+c:c}(t,e,r,o)}}function c(e,t={}){const{withBaseUrl:r}=i();return r(e,t)}},377:function(e,t,r){"use strict";function o(e){return!0===/^(\w*:|\/\/)/.test(e)}function n(e){return void 0!==e&&!o(e)}r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n}))},378:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return u}));var o=r(3),n=r(0),i=r.n(n),c=r(376);const a=e=>i.a.createElement("div",{style:{display:"inline-block",margin:2,overflow:"hidden",position:"relative",width:`calc(${100/e.cols}% - 4px)`,verticalAlign:"top"}},e.children),l=e=>i.a.createElement("div",{style:{fontSize:"0px",margin:"20px 0"}},i.a.Children.map(e.children,(t=>i.a.cloneElement(t,{cols:e.cols||4,fixedHeight:e.fixedHeight})))),s=e=>i.a.createElement(a,{cols:e.cols},i.a.createElement("a",{href:Object(c.a)(e.src),target:"_blank"},i.a.createElement("img",{src:Object(c.a)(e.src),alt:"result",style:{height:!0===e.fixedHeight?800/e.cols+"px":"auto",objectFit:!0===e.fixedHeight?"cover":"initial"}})),void 0!==e.caption&&i.a.createElement(p,null,e.caption)),p=e=>i.a.createElement("div",{style:{fontSize:16,fontStyle:"italic",textAlign:"center",margin:"10px 0px 15px"}},e.children),u=e=>{const{src:t,caption:r,...n}=e;return i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("img",Object(o.a)({src:Object(c.a)(e.src)},n)),void 0!==e.caption&&i.a.createElement(p,null,e.caption))}}}]);